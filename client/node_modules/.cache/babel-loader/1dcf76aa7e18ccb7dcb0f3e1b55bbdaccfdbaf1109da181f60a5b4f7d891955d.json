{"ast":null,"code":"var _jsxFileName = \"/workspaces/Whisper/client/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst App = () => {\n  _s();\n  const [currentPage, setCurrentPage] = useState('phone');\n  const [countryCode, setCountryCode] = useState('+234');\n  const [phoneNumber, setPhoneNumber] = useState('');\n  const [otp, setOtp] = useState('');\n  const [name, setName] = useState('');\n  const [chats, setChats] = useState([]);\n  const [selectedChat, setSelectedChat] = useState(null);\n  const [message, setMessage] = useState('');\n  const [currentUser, setCurrentUser] = useState(null);\n  const [countdown, setCountdown] = useState(0);\n  const [userId, setUserId] = useState(null);\n  const messagesEndRef = useRef(null);\n\n  // OTP countdown\n  useEffect(() => {\n    let timer;\n    if (countdown > 0) {\n      timer = setTimeout(() => setCountdown(countdown - 1), 1000);\n    }\n    return () => clearTimeout(timer);\n  }, [countdown]);\n  useEffect(() => {\n    if (selectedChat && messagesEndRef.current) {\n      messagesEndRef.current.scrollIntoView({\n        behavior: 'smooth'\n      });\n    }\n  }, [selectedChat, message]);\n\n  // Format time safely\n  const formatTime = timeString => {\n    if (!/^\\d{1,2}:\\d{2} [AP]M$/.test(timeString)) return timeString;\n    const now = new Date();\n    const [timePart, modifier] = timeString.split(' ');\n    let [hours, minutes] = timePart.split(':');\n    hours = parseInt(hours, 10);\n    minutes = parseInt(minutes, 10);\n    if (modifier === 'PM' && hours !== 12) hours += 12;\n    if (modifier === 'AM' && hours === 12) hours = 0;\n    const time = new Date(now.getFullYear(), now.getMonth(), now.getDate(), hours, minutes);\n    const diffDays = Math.floor((now - time) / (1000 * 60 * 60 * 24));\n    return diffDays === 0 ? timeString : `${time.getMonth() + 1}/${time.getDate()}`;\n  };\n\n  // --- AUTH FLOW ---\n\n  // Step 1: Send OTP\n  const handleSendOTP = async e => {\n    e.preventDefault();\n    if (!phoneNumber) return;\n\n    // âœ… Combine country code and phone number\n    const fullPhone = `${countryCode}${phoneNumber.replace(/\\s+/g, '')}`;\n    try {\n      const res = await fetch('/api/auth/send-otp', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          phone: fullPhone\n        })\n      });\n      const data = await res.json();\n      if (res.ok) {\n        setUserId(data.userId);\n        setCurrentPage('otp');\n        setCountdown(60);\n      } else {\n        alert('Error: ' + data.error);\n      }\n    } catch (err) {\n      alert('Network error. Is backend running?');\n    }\n  };\n\n  // Step 2: Verify OTP\n  const handleVerifyOTP = async e => {\n    e.preventDefault();\n    if (otp.length !== 6) return;\n    try {\n      const res = await fetch('/api/auth/verify-otp', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          userId,\n          code: otp\n        })\n      });\n      const data = await res.json();\n      if (res.ok) {\n        localStorage.setItem('token', data.token);\n        setCurrentUser(data.user);\n\n        // If new user, go to setup\n        if (!data.isExisting) {\n          setCurrentPage('setup');\n        } else {\n          loadChats(data.token);\n          setCurrentPage('chat');\n        }\n      } else {\n        alert('Invalid OTP');\n      }\n    } catch (err) {\n      alert('Error verifying OTP');\n    }\n  };\n\n  // Step 3: Set Name (for new users)\n  const handleSetupProfile = async e => {\n    e.preventDefault();\n    if (!name.trim()) return;\n    try {\n      const res = await fetch('/api/auth/setup-profile', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        },\n        body: JSON.stringify({\n          name\n        })\n      });\n      const data = await res.json();\n      if (res.ok) {\n        setCurrentUser(prev => ({\n          ...prev,\n          name\n        }));\n        loadChats(localStorage.getItem('token'));\n        setCurrentPage('chat');\n      }\n    } catch (err) {\n      alert('Failed to set name');\n    }\n  };\n  const loadChats = async token => {\n    try {\n      const res = await fetch('/api/chats', {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      });\n      const data = await res.json();\n      setChats(data);\n    } catch (err) {\n      console.error('Failed to load chats', err);\n    }\n  };\n  const handleSendMessage = async e => {\n    e.preventDefault();\n    if (!message.trim() || !selectedChat) return;\n    const token = localStorage.getItem('token');\n    try {\n      const res = await fetch('/api/chats/send', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          chatId: selectedChat.id,\n          text: message\n        })\n      });\n      const updatedChat = await res.json();\n      if (res.ok) {\n        setChats(prev => prev.map(c => c._id === updatedChat._id ? updatedChat : c));\n        setSelectedChat(updatedChat);\n        setMessage('');\n      }\n    } catch (err) {\n      console.error('Send failed', err);\n    }\n  };\n  const handleLogout = () => {\n    setCurrentPage('phone');\n    setCurrentUser(null);\n    setSelectedChat(null);\n    setChats([]);\n    setPhoneNumber('');\n    setOtp('');\n    setName('');\n    setUserId(null);\n    setCountdown(0);\n    localStorage.removeItem('token');\n  };\n\n  // --- RENDER PAGES ---\n\n  if (currentPage === 'phone') {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-gray-100 flex items-center justify-center p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg shadow-xl p-8 w-full max-w-md\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center mb-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-20 h-20 bg-green-600 rounded-full flex items-center justify-center mx-auto mb-4\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              xmlns: \"http://www.w3.org/2000/svg\",\n              className: \"h-10 w-10 text-white\",\n              fill: \"none\",\n              viewBox: \"0 0 24 24\",\n              stroke: \"currentColor\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-3xl font-bold text-gray-900\",\n            children: \"Whisper\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600 mt-2\",\n            children: \"Enter your phone number to continue\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSendOTP,\n          className: \"space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-2\",\n              children: \"Phone Number\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex gap-2 w-full\",\n              children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                value: countryCode,\n                onChange: e => setCountryCode(e.target.value),\n                className: \"px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 bg-white flex-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"+234\",\n                  children: \"\\uD83C\\uDDF3\\uD83C\\uDDEC +234 (Nigeria)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 217,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"+1\",\n                  children: \"\\uD83C\\uDDFA\\uD83C\\uDDF8 +1 (US/Canada)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 218,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"+44\",\n                  children: \"\\uD83C\\uDDEC\\uD83C\\uDDE7 +44 (UK)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 219,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"+91\",\n                  children: \"\\uD83C\\uDDEE\\uD83C\\uDDF3 +91 (India)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 220,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"+254\",\n                  children: \"\\uD83C\\uDDF0\\uD83C\\uDDEA +254 (Kenya)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 221,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"+61\",\n                  children: \"\\uD83C\\uDDE6\\uD83C\\uDDFA +61 (Australia)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 222,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"tel\",\n                value: phoneNumber,\n                onChange: e => setPhoneNumber(e.target.value),\n                placeholder: \"803 123 4567\",\n                className: \"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"w-full bg-green-600 hover:bg-green-700 text-white font-medium py-3 px-4 rounded-lg transition-colors\",\n            children: \"Send OTP\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }, this);\n  }\n  if (currentPage === 'otp') {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-gray-100 flex items-center justify-center p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg shadow-xl p-8 w-full max-w-md\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center mb-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-20 h-20 bg-green-600 rounded-full flex items-center justify-center mx-auto mb-4\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              xmlns: \"http://www.w3.org/2000/svg\",\n              className: \"h-10 w-10 text-white\",\n              fill: \"none\",\n              viewBox: \"0 0 24 24\",\n              stroke: \"currentColor\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 254,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-3xl font-bold text-gray-900\",\n            children: \"Verify Your Number\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600 mt-2\",\n            children: [\"We've sent a 6-digit code to \", countryCode, \" \", phoneNumber]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleVerifyOTP,\n          className: \"space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-2\",\n              children: \"Enter Code\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: otp,\n              onChange: e => setOtp(e.target.value),\n              placeholder: \"Enter 6-digit code\",\n              maxLength: \"6\",\n              className: \"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent text-center text-lg\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-500 text-center\",\n            children: [\"Didn't receive the code?\", ' ', /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: handleSendOTP,\n              disabled: countdown > 0,\n              className: `text-green-600 hover:text-green-700 ${countdown > 0 ? 'opacity-50 cursor-not-allowed' : ''}`,\n              children: countdown > 0 ? `Resend in ${countdown}s` : 'Resend'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 276,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"w-full bg-green-600 hover:bg-green-700 text-white font-medium py-3 px-4 rounded-lg transition-colors\",\n            children: \"Verify\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 7\n    }, this);\n  }\n  if (currentPage === 'setup') {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-gray-100 flex items-center justify-center p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg shadow-xl p-8 w-full max-w-md\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center mb-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-20 h-20 bg-green-600 rounded-full flex items-center justify-center mx-auto mb-4\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              xmlns: \"http://www.w3.org/2000/svg\",\n              className: \"h-10 w-10 text-white\",\n              fill: \"none\",\n              viewBox: \"0 0 24 24\",\n              stroke: \"currentColor\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 305,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-3xl font-bold text-gray-900\",\n            children: \"Almost Done!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600 mt-2\",\n            children: \"Set your name to get started\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSetupProfile,\n          className: \"space-y-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 mb-2\",\n              children: \"Your Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: name,\n              onChange: e => setName(e.target.value),\n              placeholder: \"Enter your name\",\n              className: \"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"w-full bg-green-600 hover:bg-green-700 text-white font-medium py-3 px-4 rounded-lg transition-colors\",\n            children: \"Continue\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 7\n    }, this);\n  }\n  if (currentPage === 'chat' && currentUser) {\n    var _currentUser$name;\n    const filteredChats = chats.filter(chat => chat.name.toLowerCase().includes(''));\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"h-screen bg-gray-100 flex\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-80 bg-white border-r border-gray-200 flex flex-col\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 bg-green-600 text-white flex items-center justify-between\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-xl font-semibold\",\n            children: \"Whisper\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 348,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex space-x-3\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"hover:bg-white/20 p-2 rounded-full transition-colors\",\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                className: \"h-5 w-5\",\n                fill: \"none\",\n                viewBox: \"0 0 24 24\",\n                stroke: \"currentColor\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: 2,\n                  d: \"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 352,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 351,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 350,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-4 border-b border-gray-200 flex items-center space-x-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: `https://placehold.co/40x40/6366f1/ffffff?text=${(currentUser === null || currentUser === void 0 ? void 0 : (_currentUser$name = currentUser.name) === null || _currentUser$name === void 0 ? void 0 : _currentUser$name.charAt(0)) || 'U'}`,\n            alt: (currentUser === null || currentUser === void 0 ? void 0 : currentUser.name) || 'User',\n            className: \"w-10 h-10 rounded-full object-cover\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 360,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"font-medium text-gray-900\",\n              children: currentUser.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 366,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-500\",\n              children: currentUser.phone\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 367,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleLogout,\n            className: \"text-gray-500 hover:text-red-600 p-2 rounded-full transition-colors\",\n            title: \"Logout\",\n            children: /*#__PURE__*/_jsxDEV(\"svg\", {\n              xmlns: \"http://www.w3.org/2000/svg\",\n              className: \"h-5 w-5\",\n              fill: \"none\",\n              viewBox: \"0 0 24 24\",\n              stroke: \"currentColor\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 375,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 369,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-3 border-b border-gray-200\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Search or start new chat\",\n              className: \"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 383,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n              xmlns: \"http://www.w3.org/2000/svg\",\n              className: \"h-5 w-5 text-gray-400 absolute left-3 top-2.5\",\n              fill: \"none\",\n              viewBox: \"0 0 24 24\",\n              stroke: \"currentColor\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 395,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 388,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 382,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 overflow-y-auto\",\n          children: filteredChats.map(chat => /*#__PURE__*/_jsxDEV(\"div\", {\n            onClick: () => setSelectedChat(chat),\n            className: `p-3 border-b border-gray-100 hover:bg-gray-50 cursor-pointer transition-colors ${(selectedChat === null || selectedChat === void 0 ? void 0 : selectedChat.id) === chat.id ? 'bg-gray-100' : ''}`,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: chat.avatar.trim(),\n                alt: chat.name,\n                className: \"w-12 h-12 rounded-full object-cover\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 411,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex-1 min-w-0\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between items-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                    className: \"text-sm font-medium text-gray-900 truncate\",\n                    children: chat.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 418,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-xs text-gray-500\",\n                    children: formatTime(chat.time)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 419,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 417,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex justify-between items-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm text-gray-600 truncate\",\n                    children: chat.lastMessage\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 422,\n                    columnNumber: 23\n                  }, this), chat.unread > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"bg-green-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center\",\n                    children: chat.unread\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 424,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 421,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 416,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 410,\n              columnNumber: 17\n            }, this)\n          }, chat.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 403,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 flex flex-col\",\n        children: selectedChat ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white border-b border-gray-200 p-3 flex items-center justify-between\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center space-x-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: selectedChat.avatar.trim(),\n                alt: selectedChat.name,\n                className: \"w-10 h-10 rounded-full object-cover\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 443,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                  className: \"text-lg font-medium text-gray-900\",\n                  children: selectedChat.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 449,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-sm text-gray-500\",\n                  children: \"online\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 450,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 448,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 442,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 441,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-1 bg-gray-100 p-4 overflow-y-auto\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-4\",\n              children: [selectedChat.messages.map(msg => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `flex ${msg.sender === 'me' ? 'justify-end' : 'justify-start'}`,\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${msg.sender === 'me' ? 'bg-green-600 text-white' : 'bg-white text-gray-800 shadow'}`,\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm\",\n                    children: msg.text\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 470,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: `text-xs mt-1 ${msg.sender === 'me' ? 'text-green-100' : 'text-gray-500'}`,\n                    children: msg.time\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 471,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 463,\n                  columnNumber: 23\n                }, this)\n              }, msg.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 459,\n                columnNumber: 21\n              }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n                ref: messagesEndRef\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 481,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 457,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 456,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white border-t border-gray-200 p-3\",\n            children: /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: handleSendMessage,\n              className: \"flex items-center space-x-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                value: message,\n                onChange: e => setMessage(e.target.value),\n                placeholder: \"Type a message\",\n                className: \"flex-1 border border-gray-300 rounded-full px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 488,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"bg-green-600 hover:bg-green-700 text-white p-2 rounded-full transition-colors\",\n                children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                  xmlns: \"http://www.w3.org/2000/svg\",\n                  className: \"h-5 w-5\",\n                  fill: \"none\",\n                  viewBox: \"0 0 24 24\",\n                  stroke: \"currentColor\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    strokeLinecap: \"round\",\n                    strokeLinejoin: \"round\",\n                    strokeWidth: 2,\n                    d: \"M14 5l7 7m0 0l-7 7m7-7H3\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 500,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 499,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 495,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 487,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 486,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 flex items-center justify-center bg-gray-100\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-24 h-24 bg-green-600 rounded-full flex items-center justify-center mx-auto mb-4\",\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                className: \"h-12 w-12 text-white\",\n                fill: \"none\",\n                viewBox: \"0 0 24 24\",\n                stroke: \"currentColor\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: 2,\n                  d: \"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 511,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 510,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 509,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-2xl font-semibold text-gray-900 mb-2\",\n              children: \"Welcome to Whisper\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 514,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-gray-600\",\n              children: \"Select a chat to start messaging\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 515,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 508,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 507,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 437,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 7\n    }, this);\n  }\n  return null;\n};\n_s(App, \"D2idKxl7U2nXvTzTaHWsBwDwT5s=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","jsxDEV","_jsxDEV","Fragment","_Fragment","App","_s","currentPage","setCurrentPage","countryCode","setCountryCode","phoneNumber","setPhoneNumber","otp","setOtp","name","setName","chats","setChats","selectedChat","setSelectedChat","message","setMessage","currentUser","setCurrentUser","countdown","setCountdown","userId","setUserId","messagesEndRef","timer","setTimeout","clearTimeout","current","scrollIntoView","behavior","formatTime","timeString","test","now","Date","timePart","modifier","split","hours","minutes","parseInt","time","getFullYear","getMonth","getDate","diffDays","Math","floor","handleSendOTP","e","preventDefault","fullPhone","replace","res","fetch","method","headers","body","JSON","stringify","phone","data","json","ok","alert","error","err","handleVerifyOTP","length","code","localStorage","setItem","token","user","isExisting","loadChats","handleSetupProfile","trim","getItem","prev","console","handleSendMessage","chatId","id","text","updatedChat","map","c","_id","handleLogout","removeItem","className","children","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","value","onChange","target","type","placeholder","required","maxLength","onClick","disabled","_currentUser$name","filteredChats","filter","chat","toLowerCase","includes","src","charAt","alt","title","avatar","lastMessage","unread","messages","msg","sender","ref","_c","$RefreshReg$"],"sources":["/workspaces/Whisper/client/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\n\nconst App = () => {\n  const [currentPage, setCurrentPage] = useState('phone');\n  const [countryCode, setCountryCode] = useState('+234');\n  const [phoneNumber, setPhoneNumber] = useState('');\n  const [otp, setOtp] = useState('');\n  const [name, setName] = useState('');\n  const [chats, setChats] = useState([]);\n  const [selectedChat, setSelectedChat] = useState(null);\n  const [message, setMessage] = useState('');\n  const [currentUser, setCurrentUser] = useState(null);\n  const [countdown, setCountdown] = useState(0);\n  const [userId, setUserId] = useState(null);\n  const messagesEndRef = useRef(null);\n\n  // OTP countdown\n  useEffect(() => {\n    let timer;\n    if (countdown > 0) {\n      timer = setTimeout(() => setCountdown(countdown - 1), 1000);\n    }\n    return () => clearTimeout(timer);\n  }, [countdown]);\n\n  useEffect(() => {\n    if (selectedChat && messagesEndRef.current) {\n      messagesEndRef.current.scrollIntoView({ behavior: 'smooth' });\n    }\n  }, [selectedChat, message]);\n\n  // Format time safely\n  const formatTime = (timeString) => {\n    if (!/^\\d{1,2}:\\d{2} [AP]M$/.test(timeString)) return timeString;\n    const now = new Date();\n    const [timePart, modifier] = timeString.split(' ');\n    let [hours, minutes] = timePart.split(':');\n    hours = parseInt(hours, 10);\n    minutes = parseInt(minutes, 10);\n\n    if (modifier === 'PM' && hours !== 12) hours += 12;\n    if (modifier === 'AM' && hours === 12) hours = 0;\n\n    const time = new Date(now.getFullYear(), now.getMonth(), now.getDate(), hours, minutes);\n    const diffDays = Math.floor((now - time) / (1000 * 60 * 60 * 24));\n    return diffDays === 0 ? timeString : `${time.getMonth() + 1}/${time.getDate()}`;\n  };\n\n  // --- AUTH FLOW ---\n\n  // Step 1: Send OTP\n  const handleSendOTP = async (e) => {\n    e.preventDefault();\n    if (!phoneNumber) return;\n\n    // âœ… Combine country code and phone number\n    const fullPhone = `${countryCode}${phoneNumber.replace(/\\s+/g, '')}`;\n\n    try {\n      const res = await fetch('/api/auth/send-otp', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ phone: fullPhone }),\n      });\n\n      const data = await res.json();\n      if (res.ok) {\n        setUserId(data.userId);\n        setCurrentPage('otp');\n        setCountdown(60);\n      } else {\n        alert('Error: ' + data.error);\n      }\n    } catch (err) {\n      alert('Network error. Is backend running?');\n    }\n  };\n\n  // Step 2: Verify OTP\n  const handleVerifyOTP = async (e) => {\n    e.preventDefault();\n    if (otp.length !== 6) return;\n\n    try {\n      const res = await fetch('/api/auth/verify-otp', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ userId, code: otp }),\n      });\n\n      const data = await res.json();\n\n      if (res.ok) {\n        localStorage.setItem('token', data.token);\n        setCurrentUser(data.user);\n\n        // If new user, go to setup\n        if (!data.isExisting) {\n          setCurrentPage('setup');\n        } else {\n          loadChats(data.token);\n          setCurrentPage('chat');\n        }\n      } else {\n        alert('Invalid OTP');\n      }\n    } catch (err) {\n      alert('Error verifying OTP');\n    }\n  };\n\n  // Step 3: Set Name (for new users)\n  const handleSetupProfile = async (e) => {\n    e.preventDefault();\n    if (!name.trim()) return;\n\n    try {\n      const res = await fetch('/api/auth/setup-profile', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        },\n        body: JSON.stringify({ name }),\n      });\n\n      const data = await res.json();\n      if (res.ok) {\n        setCurrentUser(prev => ({ ...prev, name }));\n        loadChats(localStorage.getItem('token'));\n        setCurrentPage('chat');\n      }\n    } catch (err) {\n      alert('Failed to set name');\n    }\n  };\n\n  const loadChats = async (token) => {\n    try {\n      const res = await fetch('/api/chats', {\n        headers: { 'Authorization': `Bearer ${token}` }\n      });\n      const data = await res.json();\n      setChats(data);\n    } catch (err) {\n      console.error('Failed to load chats', err);\n    }\n  };\n\n  const handleSendMessage = async (e) => {\n    e.preventDefault();\n    if (!message.trim() || !selectedChat) return;\n\n    const token = localStorage.getItem('token');\n    try {\n      const res = await fetch('/api/chats/send', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          chatId: selectedChat.id,\n          text: message\n        })\n      });\n\n      const updatedChat = await res.json();\n      if (res.ok) {\n        setChats(prev => prev.map(c => c._id === updatedChat._id ? updatedChat : c));\n        setSelectedChat(updatedChat);\n        setMessage('');\n      }\n    } catch (err) {\n      console.error('Send failed', err);\n    }\n  };\n\n  const handleLogout = () => {\n    setCurrentPage('phone');\n    setCurrentUser(null);\n    setSelectedChat(null);\n    setChats([]);\n    setPhoneNumber('');\n    setOtp('');\n    setName('');\n    setUserId(null);\n    setCountdown(0);\n    localStorage.removeItem('token');\n  };\n\n  // --- RENDER PAGES ---\n\n  if (currentPage === 'phone') {\n    return (\n      <div className=\"min-h-screen bg-gray-100 flex items-center justify-center p-4\">\n        <div className=\"bg-white rounded-lg shadow-xl p-8 w-full max-w-md\">\n          <div className=\"text-center mb-8\">\n            <div className=\"w-20 h-20 bg-green-600 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-10 w-10 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\" />\n              </svg>\n            </div>\n            <h1 className=\"text-3xl font-bold text-gray-900\">Whisper</h1>\n            <p className=\"text-gray-600 mt-2\">Enter your phone number to continue</p>\n          </div>\n\n          <form onSubmit={handleSendOTP} className=\"space-y-6\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Phone Number</label>\n              <div className=\"flex gap-2 w-full\">\n                <select\n                  value={countryCode}\n                  onChange={(e) => setCountryCode(e.target.value)}\n                  className=\"px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 bg-white flex-1\"\n                >\n                  <option value=\"+234\">ðŸ‡³ðŸ‡¬ +234 (Nigeria)</option>\n                  <option value=\"+1\">ðŸ‡ºðŸ‡¸ +1 (US/Canada)</option>\n                  <option value=\"+44\">ðŸ‡¬ðŸ‡§ +44 (UK)</option>\n                  <option value=\"+91\">ðŸ‡®ðŸ‡³ +91 (India)</option>\n                  <option value=\"+254\">ðŸ‡°ðŸ‡ª +254 (Kenya)</option>\n                  <option value=\"+61\">ðŸ‡¦ðŸ‡º +61 (Australia)</option>\n                </select>\n                <input\n                  type=\"tel\"\n                  value={phoneNumber}\n                  onChange={(e) => setPhoneNumber(e.target.value)}\n                  placeholder=\"803 123 4567\"\n                  className=\"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500\"\n                  required\n                />\n              </div>\n            </div>\n\n            <button\n              type=\"submit\"\n              className=\"w-full bg-green-600 hover:bg-green-700 text-white font-medium py-3 px-4 rounded-lg transition-colors\"\n            >\n              Send OTP\n            </button>\n          </form>\n        </div>\n      </div>\n    );\n  }\n\n  if (currentPage === 'otp') {\n    return (\n      <div className=\"min-h-screen bg-gray-100 flex items-center justify-center p-4\">\n        <div className=\"bg-white rounded-lg shadow-xl p-8 w-full max-w-md\">\n          <div className=\"text-center mb-8\">\n            <div className=\"w-20 h-20 bg-green-600 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-10 w-10 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\n              </svg>\n            </div>\n            <h1 className=\"text-3xl font-bold text-gray-900\">Verify Your Number</h1>\n            <p className=\"text-gray-600 mt-2\">We've sent a 6-digit code to {countryCode} {phoneNumber}</p>\n          </div>\n\n          <form onSubmit={handleVerifyOTP} className=\"space-y-6\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Enter Code</label>\n              <input\n                type=\"text\"\n                value={otp}\n                onChange={(e) => setOtp(e.target.value)}\n                placeholder=\"Enter 6-digit code\"\n                maxLength=\"6\"\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent text-center text-lg\"\n                required\n              />\n            </div>\n            <p className=\"text-sm text-gray-500 text-center\">\n              Didn't receive the code?{' '}\n              <button\n                type=\"button\"\n                onClick={handleSendOTP}\n                disabled={countdown > 0}\n                className={`text-green-600 hover:text-green-700 ${countdown > 0 ? 'opacity-50 cursor-not-allowed' : ''}`}\n              >\n                {countdown > 0 ? `Resend in ${countdown}s` : 'Resend'}\n              </button>\n            </p>\n\n            <button\n              type=\"submit\"\n              className=\"w-full bg-green-600 hover:bg-green-700 text-white font-medium py-3 px-4 rounded-lg transition-colors\"\n            >\n              Verify\n            </button>\n          </form>\n        </div>\n      </div>\n    );\n  }\n\n  if (currentPage === 'setup') {\n    return (\n      <div className=\"min-h-screen bg-gray-100 flex items-center justify-center p-4\">\n        <div className=\"bg-white rounded-lg shadow-xl p-8 w-full max-w-md\">\n          <div className=\"text-center mb-8\">\n            <div className=\"w-20 h-20 bg-green-600 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-10 w-10 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\n              </svg>\n            </div>\n            <h1 className=\"text-3xl font-bold text-gray-900\">Almost Done!</h1>\n            <p className=\"text-gray-600 mt-2\">Set your name to get started</p>\n          </div>\n\n          <form onSubmit={handleSetupProfile} className=\"space-y-6\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Your Name</label>\n              <input\n                type=\"text\"\n                value={name}\n                onChange={(e) => setName(e.target.value)}\n                placeholder=\"Enter your name\"\n                className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent\"\n                required\n              />\n            </div>\n\n            <button\n              type=\"submit\"\n              className=\"w-full bg-green-600 hover:bg-green-700 text-white font-medium py-3 px-4 rounded-lg transition-colors\"\n            >\n              Continue\n            </button>\n          </form>\n        </div>\n      </div>\n    );\n  }\n\n  if (currentPage === 'chat' && currentUser) {\n    const filteredChats = chats.filter(chat =>\n      chat.name.toLowerCase().includes('')\n    );\n\n    return (\n      <div className=\"h-screen bg-gray-100 flex\">\n        {/* Sidebar */}\n        <div className=\"w-80 bg-white border-r border-gray-200 flex flex-col\">\n          {/* Header */}\n          <div className=\"p-4 bg-green-600 text-white flex items-center justify-between\">\n            <h1 className=\"text-xl font-semibold\">Whisper</h1>\n            <div className=\"flex space-x-3\">\n              <button className=\"hover:bg-white/20 p-2 rounded-full transition-colors\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n                </svg>\n              </button>\n            </div>\n          </div>\n\n          {/* User Profile */}\n          <div className=\"p-4 border-b border-gray-200 flex items-center space-x-3\">\n            <img\n              src={`https://placehold.co/40x40/6366f1/ffffff?text=${currentUser?.name?.charAt(0) || 'U'}`}\n              alt={currentUser?.name || 'User'}\n              className=\"w-10 h-10 rounded-full object-cover\"\n            />\n            <div className=\"flex-1\">\n              <h3 className=\"font-medium text-gray-900\">{currentUser.name}</h3>\n              <p className=\"text-sm text-gray-500\">{currentUser.phone}</p>\n            </div>\n            <button\n              onClick={handleLogout}\n              className=\"text-gray-500 hover:text-red-600 p-2 rounded-full transition-colors\"\n              title=\"Logout\"\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\" />\n              </svg>\n            </button>\n          </div>\n\n          {/* Search */}\n          <div className=\"p-3 border-b border-gray-200\">\n            <div className=\"relative\">\n              <input\n                type=\"text\"\n                placeholder=\"Search or start new chat\"\n                className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent\"\n              />\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                className=\"h-5 w-5 text-gray-400 absolute left-3 top-2.5\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                stroke=\"currentColor\"\n              >\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n              </svg>\n            </div>\n          </div>\n\n          {/* Chat List */}\n          <div className=\"flex-1 overflow-y-auto\">\n            {filteredChats.map((chat) => (\n              <div\n                key={chat.id}\n                onClick={() => setSelectedChat(chat)}\n                className={`p-3 border-b border-gray-100 hover:bg-gray-50 cursor-pointer transition-colors ${\n                  selectedChat?.id === chat.id ? 'bg-gray-100' : ''\n                }`}\n              >\n                <div className=\"flex items-center space-x-3\">\n                  <img\n                    src={chat.avatar.trim()}\n                    alt={chat.name}\n                    className=\"w-12 h-12 rounded-full object-cover\"\n                  />\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex justify-between items-center\">\n                      <h3 className=\"text-sm font-medium text-gray-900 truncate\">{chat.name}</h3>\n                      <p className=\"text-xs text-gray-500\">{formatTime(chat.time)}</p>\n                    </div>\n                    <div className=\"flex justify-between items-center\">\n                      <p className=\"text-sm text-gray-600 truncate\">{chat.lastMessage}</p>\n                      {chat.unread > 0 && (\n                        <span className=\"bg-green-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center\">\n                          {chat.unread}\n                        </span>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* Main Chat Area */}\n        <div className=\"flex-1 flex flex-col\">\n          {selectedChat ? (\n            <>\n              {/* Chat Header */}\n              <div className=\"bg-white border-b border-gray-200 p-3 flex items-center justify-between\">\n                <div className=\"flex items-center space-x-3\">\n                  <img\n                    src={selectedChat.avatar.trim()}\n                    alt={selectedChat.name}\n                    className=\"w-10 h-10 rounded-full object-cover\"\n                  />\n                  <div>\n                    <h2 className=\"text-lg font-medium text-gray-900\">{selectedChat.name}</h2>\n                    <p className=\"text-sm text-gray-500\">online</p>\n                  </div>\n                </div>\n              </div>\n\n              {/* Messages */}\n              <div className=\"flex-1 bg-gray-100 p-4 overflow-y-auto\">\n                <div className=\"space-y-4\">\n                  {selectedChat.messages.map((msg) => (\n                    <div\n                      key={msg.id}\n                      className={`flex ${msg.sender === 'me' ? 'justify-end' : 'justify-start'}`}\n                    >\n                      <div\n                        className={`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${\n                          msg.sender === 'me'\n                            ? 'bg-green-600 text-white'\n                            : 'bg-white text-gray-800 shadow'\n                        }`}\n                      >\n                        <p className=\"text-sm\">{msg.text}</p>\n                        <p\n                          className={`text-xs mt-1 ${\n                            msg.sender === 'me' ? 'text-green-100' : 'text-gray-500'\n                          }`}\n                        >\n                          {msg.time}\n                        </p>\n                      </div>\n                    </div>\n                  ))}\n                  <div ref={messagesEndRef} />\n                </div>\n              </div>\n\n              {/* Message Input */}\n              <div className=\"bg-white border-t border-gray-200 p-3\">\n                <form onSubmit={handleSendMessage} className=\"flex items-center space-x-3\">\n                  <input\n                    type=\"text\"\n                    value={message}\n                    onChange={(e) => setMessage(e.target.value)}\n                    placeholder=\"Type a message\"\n                    className=\"flex-1 border border-gray-300 rounded-full px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent\"\n                  />\n                  <button\n                    type=\"submit\"\n                    className=\"bg-green-600 hover:bg-green-700 text-white p-2 rounded-full transition-colors\"\n                  >\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M14 5l7 7m0 0l-7 7m7-7H3\" />\n                    </svg>\n                  </button>\n                </form>\n              </div>\n            </>\n          ) : (\n            <div className=\"flex-1 flex items-center justify-center bg-gray-100\">\n              <div className=\"text-center\">\n                <div className=\"w-24 h-24 bg-green-600 rounded-full flex items-center justify-center mx-auto mb-4\">\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-12 w-12 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\" />\n                  </svg>\n                </div>\n                <h2 className=\"text-2xl font-semibold text-gray-900 mb-2\">Welcome to Whisper</h2>\n                <p className=\"text-gray-600\">Select a chat to start messaging</p>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  return null;\n};\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}